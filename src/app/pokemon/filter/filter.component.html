<div>
  <h2>Pokemon Selector</h2>
</div>

<!--pre>{{pokemons$ | async | json}}</pre-->

<section *ngIf="(pokemons$ | async) as pokemons; else loading">
  <form [formGroup]="form$">
    <div class="check-all">
      <mat-checkbox
        data-test="select-all-checkbox"
        [formControl]="form$.controls.allSelected"
        [indeterminate]="indeterminate"
        class="select-all">
        Select All
      </mat-checkbox>
    </div>

    <ng-container *ngIf="pokemons; else loading">
      <div class="checkbox-group" [formGroup]="form$.controls.pokemons">
        <div *ngFor="let pokemon of pokemons, index as i" class="flex">

          <img [src]="pokemon.img" />
          <mat-checkbox [formControlName]="pokemon.id" [attr.data-test]="'checkbox-room' + i">
            {{pokemon.name }}
          </mat-checkbox>
        </div>
      </div>

    </ng-container>
  </form>
</section>
<section>
  <button mat-button data-test="rooms-cancel-button">Cancel</button>
  <button mat-button data-test="rooms-apply-button"
          [disabled]="disableSaving"
          (click)="savePokemon()">'Apply</button>
</section>
<ng-template #loading>
  <h5>Loading....</h5>
</ng-template>
